version: '3'

dotenv:
  - .env

tasks:
  build:
    cmds:
      - go build -o bin/agent ./cmd/agent/main.go
    silent: false

  run:
    cmds:
      - go run cmd/agent/main.go
    silent: false
  
  run:ask:
    vars:
      ARGS: '{{.CLI_ARGS}}'
    description: Run the agent with a question, e.g. `task run:ask -- "What is the meaning of life?"`
    cmds:
      - go run cmd/agent/main.go ask --log --question "{{.ARGS}}"
    silent: false

  # Testing models
  test:model:perplexity:
    cmds:
      - go run cmd/agent/main.go ask 
        --provider "perplexity" 
        --model  "llama-3-8b-instruct"
        --question "What is the meaning of life?"
        
  test:model:bedrock:
    cmds:
      - go run cmd/agent/main.go ask 
        --provider "bedrock" 
        --model  "anthropic.claude-3-haiku-20240307-v1:0"
        --question "What is the meaning of life?"